extends layout

block head
  meta(charset='urf-8')
  title FRIB Traveler :: traveler :: #{_id}
  meta(name='viewport', content='width=device-width, initial-scale=1.0')
  link(rel='stylesheet', href='/bootstrap/css/bootstrap.css')
  link(rel='stylesheet', href='/bootstrap/css/bootstrap-responsive.css')
  link(rel='stylesheet', href='/stylesheets/style.css')

block content
  script.
    var travelerStatus = !{JSON.stringify(status)};
    var finishedInput = !{JSON.stringify(finishedInput)};
  .container
    #message
    h3 Traveler title:  #{title}
    if (locals.status !== undefined)
      h4 Status:
        case locals.status
          when 1
            = ' '
            span active
          when 1.5
            = ' '
            span submitted
          when 2
            = ' '
            span completed
          when 3
            = ' '
            span frozen
          when 0
            = ' '
            span initialized
          default
            = ' '
    if (locals.status !== undefined && locals.status == 1)
      .btn-group
        button.btn.btn-primary#complete Submit for completion
    .btn-group
      button.btn.btn-info(data-toggle='collapse', data-target='#details') Details
    #details.collapse.out
      if (locals.description !== undefined)
        h4 Description: #{description}
      if (locals.deadline !== undefined)
        p Deadline:
          = ' '
          span.time #{deadline}
      p Created by #{createdBy} on
        = ' '
        span.time #{createdOn}
      if (locals.updatedBy !== undefined)
        p Updated by #{updatedBy} on
          = ' '
          span.time #{updatedOn}
      if (locals.devices !== undefined && devices.length > 0)
        h4 Devices: #{devices}
    br
    form.form-horizontal#form
      != forms[0].html

block js
  script(type='text/javascript', src='/jquery/jquery-1.9.1.js')
  script(type='text/javascript', src='/bootstrap/js/bootstrap.js')
  script(type='text/javascript', src='/dependencies/binder.js')
  script(type='text/javascript', src='/dependencies/moment.js')
  script(type='text/javascript', src='/javascripts/traveler.js')
